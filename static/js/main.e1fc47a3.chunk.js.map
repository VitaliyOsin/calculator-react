{"version":3,"sources":["components/input/input.jsx","components/left-panel/left-panel.jsx","utils/lists.js","components/operators.jsx","components/calculator.jsx","utils/index.js","App.js","reportWebVitals.js","index.js"],"names":["Input","input","className","LeftPanel","onBtn","map","bt","i","b","onClick","propsTypes","PropTypes","func","opers","name","value","Operators","onOpBtn","op","e","target","dataset","sign","Calculator","equalHandler","step","n","toString","split","length","cutter","indexOf","l","v","slice","join","Number","App","useState","setInput","signFlag","setSignFlag","setSign","commaFlag","setCommaFlag","startAgain","setStartAgain","inputHandler","m","resetHandler","useCallback","key","find","arr","inp","s","res","num1","num2","oper","kf","Math","max","calc","isNaN","err","console","log","handleKeys","prev","pop","useEffect","window","addEventListener","removeEventListener","textContent","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e1fc47a3.chunk.js","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport \"./input.css\";\n\nconst Input = ({ input }) => {\n  return <div className=\"input\">{input}</div>;\n};\n\nInput.propTypes = {\n  input: PropTypes.string,\n};\n\nexport default Input;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport \"./left-panel.css\";\n\nconst LeftPanel = ({ onBtn }) => {\n  /* const btns = [\n    [\"7\", \"8\", \"9\"],\n    [\"4\", \"5\", \"6\"],\n    [\"1\", \"2\", \"3\"],\n    [\"0\", \".\", \"AC\"],\n  ]; */\n  const btns = [\n    [\"7\", \"4\", \"1\", \"0\"],\n    [\"8\", \"5\", \"2\", \".\"],\n    [\"9\", \"6\", \"3\", \"AC\"],\n  ];\n\n  return (\n    <div className=\"leftPanel\">\n      {btns.map((bt, i) => (\n        <div key={i} className=\"numbers\">\n          {bt.map((b) => (\n            <div\n              key={b}\n              onClick={onBtn}\n              className={`${b === \"AC\" ? \"ac\" : \"\"}`}\n            >\n              {b}\n            </div>\n          ))}\n        </div>\n      ))}\n    </div>\n  );\n};\n\nLeftPanel.propsTypes = {\n  onBtn: PropTypes.func,\n};\n\nexport default LeftPanel;\n","export const opers = [\n  { name: \"+\", value: \"+\" },\n  { name: \"-\", value: \"-\" },\n  { name: \"×\", value: \"*\" },\n  { name: \"÷\", value: \"/\" },\n];\n\nexport const phrases = [\n  \"Ой, фсё!\",\n  \"Тяжко мне!\",\n  \"Чуть короче бы ...\",\n  \"Да это космос!\",\n];\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { opers } from \"../utils/lists\";\n\nconst Operators = ({ onOpBtn }) => {\n  return (\n    <div className=\"operators\">\n      {opers.map((op, i) => (\n        <div\n          key={i}\n          onClick={(e) => onOpBtn(e.target.dataset.sign)}\n          data-sign={op.value}\n        >\n          {op.name}\n        </div>\n      ))}\n    </div>\n  );\n};\n\nOperators.propTypes = {\n  onOpBtn: PropTypes.func.isRequired,\n};\n\nexport default Operators;\n","import React from \"react\";\nimport Input from \"./input/input\";\nimport LeftPanel from \"./left-panel/left-panel\";\nimport Operators from \"./operators\";\nimport PropTypes from \"prop-types\";\nimport \"./calculator.css\";\n\nconst Calculator = ({ input, equalHandler, onBtn, onOpBtn }) => {\n  return (\n    <div className=\"calculator\">\n      <Input input={input} />\n      <div className=\"buttons\">\n        <Operators onOpBtn={onOpBtn} />\n        <div className=\"bot\">\n          <LeftPanel onBtn={onBtn} />\n          <div className=\"equal\" onClick={equalHandler}>\n            =\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nCalculator.propTypes = {\n  input: PropTypes.string.isRequired,\n  equalHandler: PropTypes.func.isRequired,\n  onBtn: PropTypes.func.isRequired,\n  onOpBtn: PropTypes.func.isRequired,\n};\n\nexport default Calculator;\n","const step = (n) => 10 ** (n.toString().split(\".\")[1] || \"\").length;\n\nexport function random(min, max) {\n  return Math.round(min - 0.5 + Math.random() * (max - min + 1));\n}\n\nexport const calc = (num1, num2, oper) => {\n  const kf = Math.max(...[step(num1), step(num2)]);\n  let res;\n  switch (oper) {\n    case \"+\":\n      res = (Number(num1) * kf + Number(num2) * kf) / kf;\n      break;\n    case \"-\":\n      res = (Number(num1) * kf - Number(num2) * kf) / kf;\n      break;\n    case \"*\":\n      res = (Number(num1) * kf * (Number(num2) * kf)) / kf ** 2;\n      break;\n    case \"/\":\n      if (num2 === \"0\") {\n        res = \"E0\";\n        break;\n      }\n      res = (Number(num1) * kf) / (Number(num2) * kf);\n      break;\n    default:\n      res = \"0\";\n  }\n  return res;\n};\n\nexport const cutter = (n) => {\n  const i = n.indexOf(\".\");\n  const l = n.length;\n  if (n.indexOf(\"e\") >= 0) {\n    n = n\n      .toString()\n      .split(\"e\")\n      .map((v, i) => {\n        if (i === 0) v = v.slice(0, 11);\n        return v;\n      })\n      .join(\"e\");\n    return n;\n  }\n  if (i >= 0) {\n    if (l > 14) {\n      n = n.slice(0, 14);\n    }\n  } else if (i === -1) {\n    const k = 12;\n    if (l > k) {\n      n = Number(n) / 10 ** (l - 1);\n      n = `${n.toString().slice(0, 12)}e${l - 1}`;\n    }\n  }\n  return n;\n};\n","import { useState, useEffect, useCallback } from \"react\";\nimport \"./App.css\";\nimport Calculator from \"./components/calculator\";\nimport { calc, cutter } from \"./utils\";\nimport { opers } from \"./utils/lists.js\";\n\nfunction App() {\n  const [input, setInput] = useState(\"0\");\n  const [signFlag, setSignFlag] = useState(true);\n  const [sign, setSign] = useState(\"\");\n  const [commaFlag, setCommaFlag] = useState([true, true]);\n  const [startAgain, setStartAgain] = useState(false);\n\n  const inputHandler = (m) => {\n    setInput(m);\n  };\n\n  const resetHandler = () => {\n    setInput(\"0\");\n    setSignFlag(true);\n    setSign(\"\");\n    setCommaFlag([true, true]);\n    setStartAgain(false);\n  };\n\n  const onBtn = (e) => {\n    const { target } = e;\n\n    if (target.textContent === \"AC\") {\n      resetHandler();\n      return;\n    } else if (target.textContent === \".\") {\n      if (commaFlag || !startAgain) {\n        inputHandler(input + target.textContent);\n        setCommaFlag(false);\n      }\n    } else {\n      if (input === \"0\" || input === \"\" || startAgain) {\n        inputHandler(target.textContent);\n        setStartAgain(false);\n      } else {\n        inputHandler(input + target.textContent);\n      }\n    }\n  };\n\n  const onOpBtn = useCallback(\n    (key) => {\n      if (input === \"0\" || input === \"\") {\n        if (key === \"-\") {\n          inputHandler(key);\n        }\n      } else if (input === \"-\") {\n        if (key === \"-\") {\n          inputHandler(\"0\");\n        }\n      } else {\n        if (signFlag) {\n          inputHandler(input + key);\n          setSign(key);\n          setSignFlag(false);\n        } else {\n          if (input.slice(input.length - 1) === \"-\" && key === \"-\") {\n            inputHandler(`${input.slice(0, input.length - 1)}+`);\n            setSign(\"+\");\n            setSignFlag(false);\n          } else if (\n            opers.find((v) => v.value === input[input.length - 1]) &&\n            key === \"-\"\n          ) {\n            inputHandler(`${input}${key}`);\n          }\n        }\n      }\n\n      setCommaFlag(false);\n      setStartAgain(false);\n    },\n    [input, signFlag]\n  );\n\n  const equalHandler = useCallback(() => {\n    try {\n      let arr;\n      let inp = input;\n      let s = \"\";\n      if (sign) {\n        if (input[0] === \"-\" && sign === \"-\") {\n          s = \"-\";\n          inp = input.slice(1);\n        }\n\n        arr = inp.split(sign);\n        if (arr[1] === \"\") arr[1] = arr[0];\n        else if (arr[0] === \"\") arr[0] = \"0\";\n        arr[0] = `${s}${arr[0]}`;\n      } else {\n        return;\n      }\n      const res = calc(arr[0], arr[1], sign);\n\n      res\n        ? setInput(cutter(res.toString()))\n        : setInput(isNaN(res) ? \"Ой!\" : cutter(res.toString()));\n      setCommaFlag(false);\n      setSignFlag(true);\n      setStartAgain(true);\n      setSign(\"\");\n    } catch (err) {\n      console.log(\"Ошибка ввода...\");\n      resetHandler();\n      return;\n    }\n  }, [input, sign]);\n\n  const handleKeys = useCallback(\n    (e) => {\n      const { key } = e;\n      if (Number(key) >= 0 && Number(key) <= 9) {\n        if (input === \"0\" || startAgain) {\n          inputHandler(key);\n          setStartAgain(false);\n        } else {\n          inputHandler(input + key);\n        }\n      } else if (opers.find((v) => v.value === key)) {\n        onOpBtn(key);\n      } else if (key === \"Enter\" || key === \"=\") {\n        equalHandler();\n      } else if (key === \"Delete\") {\n        resetHandler();\n      } else if (key === \"Backspace\") {\n        setInput((prev) => {\n          prev = prev.split(\"\");\n          prev.pop();\n          return prev.join(\"\");\n        });\n      } else if (key === \".\") {\n        if (commaFlag || !startAgain) {\n          inputHandler(input + key);\n        }\n      }\n    },\n    [input, commaFlag, equalHandler, startAgain, onOpBtn]\n  );\n\n  useEffect(() => {\n    window.addEventListener(\"keydown\", handleKeys);\n    return () => {\n      window.removeEventListener(\"keydown\", handleKeys);\n    };\n  }, [input, handleKeys]);\n\n  return (\n    <Calculator\n      input={input}\n      equalHandler={equalHandler}\n      onBtn={onBtn}\n      onOpBtn={onOpBtn}\n    />\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}