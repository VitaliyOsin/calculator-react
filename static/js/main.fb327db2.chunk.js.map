{"version":3,"sources":["components/input/input.jsx","components/left-panel/left-panel.jsx","utils/lists.js","components/operators.jsx","components/calculator.jsx","utils/index.js","App.js","reportWebVitals.js","index.js"],"names":["Input","input","className","LeftPanel","onBtn","map","bt","i","b","onClick","opers","name","value","Operators","onOpBtn","op","Calculator","equalHandler","step","n","toString","split","length","App","useState","setInput","signFlag","setSignFlag","sign","setSign","commaFlag","setCommaFlag","startAgain","setStartAgain","inputHandler","m","resetHandler","useCallback","arr","res","num1","num2","oper","kf","Math","max","Number","calc","isNaN","err","console","log","handleKeys","e","key","find","v","prev","pop","join","useEffect","window","addEventListener","removeEventListener","target","textContent","dataset","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"0SAOeA,EAJD,SAAC,GAAe,IAAbC,EAAY,EAAZA,MACf,OAAO,qBAAKC,UAAU,QAAf,SAAwBD,KC+BlBE,G,MAhCG,SAAC,GAAe,IAAbC,EAAY,EAAZA,MAanB,OACE,qBAAKF,UAAU,YAAf,SAPW,CACX,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,KAChB,CAAC,IAAK,IAAK,IAAK,OAKRG,KAAI,SAACC,EAAIC,GAAL,OACR,qBAAaL,UAAU,UAAvB,SACGI,EAAGD,KAAI,SAACG,GAAD,OACN,qBAEEC,QAASL,EACTF,UAAS,UAAW,OAANM,EAAa,KAAO,IAHpC,SAKGA,GAJIA,OAHDD,UCnBLG,EAAQ,CACnB,CAAEC,KAAM,IAAKC,MAAO,KACpB,CAAED,KAAM,IAAKC,MAAO,KACpB,CAAED,KAAM,OAAKC,MAAO,KACpB,CAAED,KAAM,OAAKC,MAAO,MCWPC,EAZG,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QACnB,OACE,qBAAKZ,UAAU,YAAf,SACGQ,EAAML,KAAI,SAACU,EAAIR,GAAL,OACT,qBAAaE,QAASK,EAAS,YAAWC,EAAGH,MAA7C,SACGG,EAAGJ,MADIJ,SCgBHS,G,MAjBI,SAAC,GAA6C,IAA3Cf,EAA0C,EAA1CA,MAAOgB,EAAmC,EAAnCA,aAAcb,EAAqB,EAArBA,MAAOU,EAAc,EAAdA,QAChD,OACE,sBAAKZ,UAAU,aAAf,UACE,cAAC,EAAD,CAAOD,MAAOA,IACd,sBAAKC,UAAU,UAAf,UACE,cAAC,EAAD,CAAWY,QAASA,IACpB,sBAAKZ,UAAU,MAAf,UACE,cAAC,EAAD,CAAWE,MAAOA,IAClB,qBAAKF,UAAU,QAAQO,QAASQ,EAAhC,0BCdJC,EAAO,SAACC,GAAD,gBAAO,IAAOA,EAAEC,WAAWC,MAAM,KAAK,IAAM,IAAIC,SC6I9CC,MAvIf,WACE,MAA0BC,mBAAS,KAAnC,mBAAOvB,EAAP,KAAcwB,EAAd,KACA,EAAgCD,oBAAS,GAAzC,mBAAOE,EAAP,KAAiBC,EAAjB,KACA,EAAwBH,mBAAS,IAAjC,mBAAOI,EAAP,KAAaC,EAAb,KACA,EAAkCL,mBAAS,EAAC,GAAM,IAAlD,mBAAOM,EAAP,KAAkBC,EAAlB,KACA,EAAoCP,oBAAS,GAA7C,mBAAOQ,EAAP,KAAmBC,EAAnB,KAEMC,EAAe,SAACC,GACpBV,EAASU,IAGLC,EAAe,WACnBX,EAAS,KACTE,GAAY,GACZE,EAAQ,IACRE,EAAa,EAAC,GAAM,IACpBE,GAAc,IAmCVhB,EAAeoB,uBAAY,WAC/B,IACE,IAAIC,EACJ,IAAIV,EAKF,OAHe,MADfU,EAAMrC,EAAMoB,MAAMO,IACV,GAAWU,EAAI,GAAKA,EAAI,GACZ,KAAXA,EAAI,KAAWA,EAAI,GAAK,KAInC,IAAMC,EDjEQ,SAACC,EAAMC,EAAMC,GAC/B,IACIH,EADEI,EAAKC,KAAKC,IAAL,MAAAD,KAAY,CAAC1B,EAAKsB,GAAOtB,EAAKuB,KAEzC,OAAQC,GACN,IAAK,IACHH,GAAOO,OAAON,GAAQG,EAAKG,OAAOL,GAAQE,GAAMA,EAChD,MACF,IAAK,IACHJ,GAAOO,OAAON,GAAQG,EAAKG,OAAOL,GAAQE,GAAMA,EAChD,MACF,IAAK,IACHJ,EAAOO,OAAON,GAAQG,GAAMG,OAAOL,GAAQE,GAArC,SAA4CA,EAAM,GACxD,MACF,IAAK,IACH,GAAa,MAATF,EAAc,CAChBF,EAAM,KACN,MAEFA,EAAOO,OAAON,GAAQG,GAAOG,OAAOL,GAAQE,GAC5C,MACF,QACEJ,EAAM,IAEV,OAAOA,EC0CSQ,CAAKT,EAAI,GAAIA,EAAI,GAAIV,GAG7BH,EADJc,EACaA,EAAInB,WACJ4B,MAAMT,GAAO,gBAAQA,EAAInB,YACtCW,GAAa,GACbJ,GAAY,GACZM,GAAc,GACdJ,EAAQ,IACR,MAAOoB,GAGP,OAFAC,QAAQC,IAAI,+EACZf,OAGD,CAACnC,EAAO2B,IAELwB,EAAaf,uBACjB,SAACgB,GACCH,QAAQC,IAAIE,EAAEC,KACd,IAAQA,EAAQD,EAARC,IACJR,OAAOQ,IAAQ,GAAKR,OAAOQ,IAAQ,EACvB,MAAVrD,GAAiB+B,GACnBE,EAAaoB,GACbrB,GAAc,IAEdC,EAAajC,EAAQqD,GAEd5C,EAAM6C,MAAK,SAACC,GAAD,OAAOA,EAAE5C,QAAU0C,MACvC3B,GAAY,GAEZM,GAAc,GACVP,IACFQ,EAAajC,EAAQqD,GACrBzB,EAAQyB,KAEO,UAARA,GAA2B,MAARA,EAC5BrC,IACiB,WAARqC,EACTlB,IACiB,cAARkB,GAETJ,QAAQC,IAAI,WAAYlD,GACxBwB,GAAS,SAACgC,GAIR,OAHAP,QAAQC,IAAI,SAAUM,IACtBA,EAAOA,EAAKpC,MAAM,KACbqC,MACED,EAAKE,KAAK,QAEF,MAARL,KACLxB,GAAcE,GAChBE,EAAajC,EAAQqD,MAI3B,CAACrD,EAAO6B,EAAWb,EAAcS,EAAUM,IAU7C,OAPA4B,qBAAU,WAER,OADAC,OAAOC,iBAAiB,UAAWV,GAC5B,WACLS,OAAOE,oBAAoB,UAAWX,MAEvC,CAACnD,EAAOmD,IAGT,cAAC,EAAD,CACEnD,MAAOA,EACPgB,aAAcA,EACdb,MA9GU,SAACiD,GACb,IAAQW,EAAWX,EAAXW,OAEmB,OAAvBA,EAAOC,YAGuB,MAAvBD,EAAOC,aACZnC,GAAcE,IAChBE,EAAajC,EAAQ+D,EAAOC,aAC5BlC,GAAa,IAGD,MAAV9B,GAAiB+B,GACnBE,EAAa8B,EAAOC,aACpBhC,GAAc,IAEdC,EAAajC,EAAQ+D,EAAOC,aAZ9B7B,KA2GAtB,QA1FY,SAACuC,GACf,IAAQW,EAAWX,EAAXW,OACRrC,GAAY,GACZI,GAAa,GACbE,GAAc,GACVP,IACFQ,EAAajC,EAAQ+D,EAAOE,QAAQtC,MACpCC,EAAQmC,EAAOE,QAAQtC,WCzCduC,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCDdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1Bb,M","file":"static/js/main.fb327db2.chunk.js","sourcesContent":["import React from \"react\";\nimport \"./input.css\";\n\nconst Input = ({ input }) => {\n  return <div className=\"input\">{input}</div>;\n};\n\nexport default Input;\n","import React from \"react\";\nimport \"./left-panel.css\";\n\nconst LeftPanel = ({ onBtn }) => {\n  /* const btns = [\n    [\"7\", \"8\", \"9\"],\n    [\"4\", \"5\", \"6\"],\n    [\"1\", \"2\", \"3\"],\n    [\"0\", \".\", \"AC\"],\n  ]; */\n  const btns = [\n    [\"7\", \"4\", \"1\", \"0\"],\n    [\"8\", \"5\", \"2\", \".\"],\n    [\"9\", \"6\", \"3\", \"AC\"],\n  ];\n\n  return (\n    <div className=\"leftPanel\">\n      {btns.map((bt, i) => (\n        <div key={i} className=\"numbers\">\n          {bt.map((b) => (\n            <div\n              key={b}\n              onClick={onBtn}\n              className={`${b === \"AC\" ? \"ac\" : \"\"}`}\n            >\n              {b}\n            </div>\n          ))}\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default LeftPanel;\n","export const opers = [\n  { name: \"+\", value: \"+\" },\n  { name: \"-\", value: \"-\" },\n  { name: \"×\", value: \"*\" },\n  { name: \"÷\", value: \"/\" },\n];\n","import React from \"react\";\nimport { opers } from \"../utils/lists\";\n\nconst Operators = ({ onOpBtn }) => {\n  return (\n    <div className=\"operators\">\n      {opers.map((op, i) => (\n        <div key={i} onClick={onOpBtn} data-sign={op.value}>\n          {op.name}\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default Operators;\n","import React from \"react\";\nimport Input from \"./input/input\";\nimport LeftPanel from \"./left-panel/left-panel\";\nimport Operators from \"./operators\";\nimport \"./calculator.css\";\n\nconst Calculator = ({ input, equalHandler, onBtn, onOpBtn }) => {\n  return (\n    <div className=\"calculator\">\n      <Input input={input} />\n      <div className=\"buttons\">\n        <Operators onOpBtn={onOpBtn} />\n        <div className=\"bot\">\n          <LeftPanel onBtn={onBtn} />\n          <div className=\"equal\" onClick={equalHandler}>\n            =\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Calculator;\n","const step = (n) => 10 ** (n.toString().split(\".\")[1] || \"\").length;\n\nexport const calc = (num1, num2, oper) => {\n  const kf = Math.max(...[step(num1), step(num2)]);\n  let res;\n  switch (oper) {\n    case \"+\":\n      res = (Number(num1) * kf + Number(num2) * kf) / kf;\n      break;\n    case \"-\":\n      res = (Number(num1) * kf - Number(num2) * kf) / kf;\n      break;\n    case \"*\":\n      res = (Number(num1) * kf * (Number(num2) * kf)) / kf ** 2;\n      break;\n    case \"/\":\n      if (num2 === \"0\") {\n        res = \"E0\";\n        break;\n      }\n      res = (Number(num1) * kf) / (Number(num2) * kf);\n      break;\n    default:\n      res = \"0\";\n  }\n  return res;\n};\n","import { useState, useEffect, useCallback } from \"react\";\nimport \"./App.css\";\nimport Calculator from \"./components/calculator\";\nimport { calc } from \"./utils\";\nimport { opers } from \"./utils/lists.js\";\n\nfunction App() {\n  const [input, setInput] = useState(\"0\");\n  const [signFlag, setSignFlag] = useState(true);\n  const [sign, setSign] = useState(\"\");\n  const [commaFlag, setCommaFlag] = useState([true, true]);\n  const [startAgain, setStartAgain] = useState(false);\n\n  const inputHandler = (m) => {\n    setInput(m);\n  };\n\n  const resetHandler = () => {\n    setInput(\"0\");\n    setSignFlag(true);\n    setSign(\"\");\n    setCommaFlag([true, true]);\n    setStartAgain(false);\n  };\n\n  const onBtn = (e) => {\n    const { target } = e;\n\n    if (target.textContent === \"AC\") {\n      resetHandler();\n      return;\n    } else if (target.textContent === \".\") {\n      if (commaFlag || !startAgain) {\n        inputHandler(input + target.textContent);\n        setCommaFlag(false);\n      }\n    } else {\n      if (input === \"0\" || startAgain) {\n        inputHandler(target.textContent);\n        setStartAgain(false);\n      } else {\n        inputHandler(input + target.textContent);\n      }\n    }\n  };\n\n  const onOpBtn = (e) => {\n    const { target } = e;\n    setSignFlag(false);\n    setCommaFlag(false);\n    setStartAgain(false);\n    if (signFlag) {\n      inputHandler(input + target.dataset.sign);\n      setSign(target.dataset.sign);\n    }\n  };\n\n  const equalHandler = useCallback(() => {\n    try {\n      let arr;\n      if (sign) {\n        arr = input.split(sign);\n        if (arr[1] === \"\") arr[1] = arr[0];\n        else if (arr[0] === \"\") arr[0] = \"0\";\n      } else {\n        return;\n      }\n      const res = calc(arr[0], arr[1], sign);\n\n      res\n        ? setInput(res.toString())\n        : setInput(isNaN(res) ? \"Ой!\" : res.toString());\n      setCommaFlag(false);\n      setSignFlag(true);\n      setStartAgain(true);\n      setSign(\"\");\n    } catch (err) {\n      console.log(\"Ошибка ввода...\");\n      resetHandler();\n      return;\n    }\n  }, [input, sign]);\n\n  const handleKeys = useCallback(\n    (e) => {\n      console.log(e.key);\n      const { key } = e;\n      if (Number(key) >= 0 && Number(key) <= 9) {\n        if (input === \"0\" || startAgain) {\n          inputHandler(key);\n          setStartAgain(false);\n        } else {\n          inputHandler(input + key);\n        }\n      } else if (opers.find((v) => v.value === key)) {\n        setSignFlag(false);\n        //setCommaFlag(true);\n        setStartAgain(false);\n        if (signFlag) {\n          inputHandler(input + key);\n          setSign(key);\n        }\n      } else if (key === \"Enter\" || key === \"=\") {\n        equalHandler();\n      } else if (key === \"Delete\") {\n        resetHandler();\n      } else if (key === \"Backspace\") {\n        //console.log(\"SPLIT: \", input.split(\"\"));\n        console.log(\"SPLIT1: \", input);\n        setInput((prev) => {\n          console.log(\"PREV: \", prev);\n          prev = prev.split(\"\");\n          prev.pop();\n          return prev.join(\"\");\n        });\n      } else if (key === \".\") {\n        if (commaFlag || !startAgain) {\n          inputHandler(input + key);\n        }\n      }\n    },\n    [input, commaFlag, equalHandler, signFlag, startAgain]\n  );\n\n  useEffect(() => {\n    window.addEventListener(\"keydown\", handleKeys);\n    return () => {\n      window.removeEventListener(\"keydown\", handleKeys);\n    };\n  }, [input, handleKeys]);\n\n  return (\n    <Calculator\n      input={input}\n      equalHandler={equalHandler}\n      onBtn={onBtn}\n      onOpBtn={onOpBtn}\n    />\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}